2025-08-18 20:20:51 [INFO] Starting migration process...
2025-08-18 20:20:51 [INFO] You will be prompted to select a networking tool and rerouting option to establish a secure connection and manage traffic between the clusters.
2025-08-18 20:22:27 [INFO] Initializing kubernetes clients
2025-08-18 20:22:28 [INFO] Checking connectivity between clusters
2025-08-18 20:22:28 [DEBUG] Fetching cluster IPs
2025-08-18 20:22:28 [DEBUG] Cleaning up probe resources
2025-08-18 20:22:28 [DEBUG] Testing connectivity with Origin IP: 192.168.131.1, Target IP: 192.168.133.1
2025-08-18 20:22:28 [DEBUG] Deploying probe resources
2025-08-18 20:22:30 [DEBUG] Waiting for pods to be ready
2025-08-18 20:22:34 [DEBUG] Pods are ready
2025-08-18 20:22:34 [DEBUG] Checking connectivity between clusters
2025-08-18 20:22:44 [DEBUG] Connectivity check successful with Origin IP: 192.168.131.1, Target IP: 192.168.133.1 - both clusters can reach each other
2025-08-18 20:22:44 [DEBUG] Cleaning up probe resources
2025-08-18 20:22:44 [DEBUG] Connectivity probe complete
2025-08-18 20:22:44 [INFO] Deploy reverse proxy for request forwarding
2025-08-18 20:22:44 [DEBUG] Fetching loadbalancer IP
2025-08-18 20:22:44 [DEBUG] Service: traefik IP: 141.13.5.242
2025-08-18 20:22:44 [DEBUG] Fetched loadbalancer IP: 141.13.5.242
2025-08-18 20:22:44 [DEBUG] Deploying proxy
2025-08-18 20:22:45 [INFO] Establishing secure connection between clusters
2025-08-18 20:22:45 [INFO] Installing Submariner
2025-08-18 20:22:48 [DEBUG] Pod CIDR Origin: 10.42.0.0/16

2025-08-18 20:22:48 [DEBUG] Pod CIDR Target: 10.42.0.0/16

2025-08-18 20:22:48 [DEBUG] Service CIDR Origin: 10.43.0.0/16

2025-08-18 20:22:48 [DEBUG] Service CIDR Target: 10.43.0.0/16

2025-08-18 20:22:48 [DEBUG] Broker URL: 192.168.131.1:6443

2025-08-18 20:22:48 [INFO] Labeling gateway nodes
2025-08-18 20:22:49 [INFO] Labeled gateway nodes
2025-08-18 20:22:49 [INFO] Deploying broker
2025-08-18 20:22:58 [INFO] Deployed broker
2025-08-18 20:22:58 [DEBUG] Generated random string: 3gwPkgX5P5ddemGGY0B-tgAY-pOOY8CrCOaklJgtde-YftdPybvP8Hq6sz5zPsF0

2025-08-18 20:22:58 [INFO] Joining origin cluster
2025-08-18 20:23:14 [INFO] Joined origin cluster
2025-08-18 20:23:14 [INFO] Joining target cluster
2025-08-18 20:23:33 [INFO] Joined target cluster
2025-08-18 20:23:33 [INFO] Submariner installed
2025-08-18 20:23:33 [INFO] Migrating configuration resources
2025-08-18 20:23:37 [INFO] Scanning for existing cnpg databases
2025-08-18 20:23:37 [INFO] No existing cnpg databases found, skipping migration
2025-08-18 20:23:37 [INFO] Migrating MongoDBs
2025-08-18 20:23:37 [INFO] No existing MongoDBs found, skipping migration
2025-08-18 20:23:37 [INFO] Checking for existing MongoDB Community Operator deployment
2025-08-18 20:23:37 [DEBUG] Found MongoDB Community Operator version 0.13.0 in namespace mongodb
2025-08-18 20:23:37 [INFO] Deploying MongoDB Community Operator version 0.13.0 to target cluster
2025-08-18 20:23:48 [DEBUG] Found 1 MongoDB databases in origin cluster
2025-08-18 20:23:48 [DEBUG] Creating MongoDB client pod...
2025-08-18 20:23:48 [DEBUG] Waiting for MongoDB client pod to be ready...
2025-08-18 20:24:05 [DEBUG] Creating MongoDB client pod...
2025-08-18 20:24:05 [DEBUG] Waiting for MongoDB client pod to be ready...
2025-08-18 20:24:20 [DEBUG] Deploying MongoDB cluster example-mongodb in namespace mongodb
2025-08-18 20:24:20 [DEBUG] Waiting for MongoDB cluster example-mongodb in namespace mongodb to be ready
2025-08-18 20:24:25 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: 
2025-08-18 20:24:31 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:24:36 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:24:41 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:24:46 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:24:51 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:24:56 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:25:01 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:25:06 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:25:11 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:25:16 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-18 20:25:16 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is ready
2025-08-18 20:25:16 [INFO] Checking for namespace
2025-08-18 20:25:16 [INFO] Namespace exists
2025-08-18 20:25:16 [INFO] Creating service export resource
2025-08-18 20:25:16 [DEBUG] map[apiVersion:multicluster.x-k8s.io/v1alpha1 kind:ServiceExport metadata:map[creationTimestamp:<nil> name:example-mongodb-svc namespace:mongodb] status:map[]]
2025-08-18 20:25:16 [INFO] Service exported successfully
2025-08-18 20:25:16 [INFO] Checking for namespace
2025-08-18 20:25:16 [INFO] Namespace exists
2025-08-18 20:25:16 [INFO] Creating service export resource
2025-08-18 20:25:16 [DEBUG] map[apiVersion:multicluster.x-k8s.io/v1alpha1 kind:ServiceExport metadata:map[creationTimestamp:<nil> name:example-mongodb-svc namespace:mongodb] status:map[]]
2025-08-18 20:25:17 [INFO] Service exported successfully
2025-08-18 20:25:24 [DEBUG] MongoDB command output: {"set":"example-mongodb","date":"2025-08-18T18:25:24.509Z","myState":1,"term":{"low":1,"high":0,"unsigned":false},"syncSourceHost":"","syncSourceId":-1,"heartbeatIntervalMillis":{"low":2000,"high":0,"unsigned":false},"majorityVoteCount":2,"writeMajorityCount":2,"votingMembersCount":2,"writableVotingMembersCount":2,"optimes":{"lastCommittedOpTime":{"ts":{"$timestamp":"7539993432349999109"},"t":{"low":1,"high":0,"unsigned":false}},"lastCommittedWallTime":"2025-08-18T18:25:24.442Z","readConcernMajorityOpTime":{"ts":{"$timestamp":"7539993432349999109"},"t":{"low":1,"high":0,"unsigned":false}},"appliedOpTime":{"ts":{"$timestamp":"7539993432349999109"},"t":{"low":1,"high":0,"unsigned":false}},"durableOpTime":{"ts":{"$timestamp":"7539993432349999109"},"t":{"low":1,"high":0,"unsigned":false}},"lastAppliedWallTime":"2025-08-18T18:25:24.442Z","lastDurableWallTime":"2025-08-18T18:25:24.442Z"},"lastStableRecoveryTimestamp":{"$timestamp":"7539993367925489665"},"electionCandidateMetrics":{"lastElectionReason":"electionTimeout","lastElectionDate":"2025-08-18T18:18:20.577Z","electionTerm":{"low":1,"high":0,"unsigned":false},"lastCommittedOpTimeAtElection":{"ts":{"$timestamp":"7539991564039225345"},"t":{"low":-1,"high":-1,"unsigned":false}},"lastSeenOpTimeAtElection":{"ts":{"$timestamp":"7539991564039225345"},"t":{"low":-1,"high":-1,"unsigned":false}},"numVotesNeeded":2,"priorityAtElection":1,"electionTimeoutMillis":{"low":10000,"high":0,"unsigned":false},"numCatchUpOps":{"low":0,"high":0,"unsigned":false},"newTermStartDate":"2025-08-18T18:18:20.631Z","wMajorityWriteAvailabilityDate":"2025-08-18T18:18:21.853Z"},"members":[{"_id":0,"name":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","health":1,"state":1,"stateStr":"PRIMARY","uptime":503,"optime":{"ts":{"$timestamp":"7539993432349999109"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDate":"2025-08-18T18:25:24.000Z","lastAppliedWallTime":"2025-08-18T18:25:24.442Z","lastDurableWallTime":"2025-08-18T18:25:24.442Z","syncSourceHost":"","syncSourceId":-1,"infoMessage":"","electionTime":{"$timestamp":"7539991611283865601"},"electionDate":"2025-08-18T18:18:20.000Z","configVersion":1,"configTerm":1,"self":true,"lastHeartbeatMessage":""},{"_id":1,"name":"example-mongodb-1.example-mongodb-svc.mongodb.svc.cluster.local:27017","health":1,"state":2,"stateStr":"SECONDARY","uptime":435,"optime":{"ts":{"$timestamp":"7539993423760064518"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDurable":{"ts":{"$timestamp":"7539993423760064518"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDate":"2025-08-18T18:25:22.000Z","optimeDurableDate":"2025-08-18T18:25:22.000Z","lastAppliedWallTime":"2025-08-18T18:25:24.442Z","lastDurableWallTime":"2025-08-18T18:25:24.442Z","lastHeartbeat":"2025-08-18T18:25:22.783Z","lastHeartbeatRecv":"2025-08-18T18:25:24.272Z","pingMs":{"low":0,"high":0,"unsigned":false},"lastHeartbeatMessage":"","syncSourceHost":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","syncSourceId":0,"infoMessage":"","configVersion":1,"configTerm":1}],"ok":1,"$clusterTime":{"clusterTime":{"$timestamp":"7539993432349999109"},"signature":{"hash":"ANW97eHIWMmRGTt6ihOR+2HgTjI=","keyId":{"low":5,"high":1755541100,"unsigned":false}}},"operationTime":{"$timestamp":"7539993432349999109"}}

2025-08-18 20:25:27 [DEBUG] MongoDB command output: {"set":"example-mongodb","date":"2025-08-18T18:25:27.053Z","myState":1,"term":{"low":1,"high":0,"unsigned":false},"syncSourceHost":"","syncSourceId":-1,"heartbeatIntervalMillis":{"low":2000,"high":0,"unsigned":false},"majorityVoteCount":1,"writeMajorityCount":1,"votingMembersCount":1,"writableVotingMembersCount":1,"optimes":{"lastCommittedOpTime":{"ts":{"$timestamp":"7539993372220456969"},"t":{"low":1,"high":0,"unsigned":false}},"lastCommittedWallTime":"2025-08-18T18:25:10.401Z","readConcernMajorityOpTime":{"ts":{"$timestamp":"7539993372220456969"},"t":{"low":1,"high":0,"unsigned":false}},"appliedOpTime":{"ts":{"$timestamp":"7539993372220456969"},"t":{"low":1,"high":0,"unsigned":false}},"durableOpTime":{"ts":{"$timestamp":"7539993372220456969"},"t":{"low":1,"high":0,"unsigned":false}},"lastAppliedWallTime":"2025-08-18T18:25:10.401Z","lastDurableWallTime":"2025-08-18T18:25:10.401Z"},"lastStableRecoveryTimestamp":{"$timestamp":"7539993367925489665"},"electionCandidateMetrics":{"lastElectionReason":"electionTimeout","lastElectionDate":"2025-08-18T18:25:09.182Z","electionTerm":{"low":1,"high":0,"unsigned":false},"lastCommittedOpTimeAtElection":{"ts":{"$timestamp":"7539993367925489665"},"t":{"low":-1,"high":-1,"unsigned":false}},"lastSeenOpTimeAtElection":{"ts":{"$timestamp":"7539993367925489665"},"t":{"low":-1,"high":-1,"unsigned":false}},"numVotesNeeded":1,"priorityAtElection":1,"electionTimeoutMillis":{"low":10000,"high":0,"unsigned":false},"newTermStartDate":"2025-08-18T18:25:09.228Z","wMajorityWriteAvailabilityDate":"2025-08-18T18:25:09.255Z"},"members":[{"_id":0,"name":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","health":1,"state":1,"stateStr":"PRIMARY","uptime":19,"optime":{"ts":{"$timestamp":"7539993372220456969"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDate":"2025-08-18T18:25:10.000Z","lastAppliedWallTime":"2025-08-18T18:25:10.401Z","lastDurableWallTime":"2025-08-18T18:25:10.401Z","syncSourceHost":"","syncSourceId":-1,"infoMessage":"Could not find member to sync from","electionTime":{"$timestamp":"7539993367925489666"},"electionDate":"2025-08-18T18:25:09.000Z","configVersion":1,"configTerm":1,"self":true,"lastHeartbeatMessage":""}],"ok":1,"$clusterTime":{"clusterTime":{"$timestamp":"7539993372220456969"},"signature":{"hash":"9XvHdO1AMbgO2XT1rTxMwAP1l6Y=","keyId":{"low":7,"high":1755541509,"unsigned":false}}},"operationTime":{"$timestamp":"7539993372220456969"}}

2025-08-18 20:25:27 [INFO] Primary MongoDB host in origin cluster: example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local
2025-08-18 20:25:27 [INFO] Primary MongoDB host in target cluster: example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local
2025-08-18 20:25:29 [DEBUG] MongoDB command output: {
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1755541529, i: 7 }),
    signature: {
      hash: Binary.createFromBase64('20rV0kJQ0dcNbqK2gz9KH95WP7U=', 0),
      keyId: Long('7539991611283865605')
    }
  },
  operationTime: Timestamp({ t: 1755541529, i: 7 })
}

2025-08-18 20:25:32 [DEBUG] MongoDB command output: {
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1755541532, i: 1 }),
    signature: {
      hash: Binary.createFromBase64('j0iP+87hUpum+ghnIOVAGdn3RXA=', 0),
      keyId: Long('7539993367925489671')
    }
  },
  operationTime: Timestamp({ t: 1755541532, i: 1 })
}

2025-08-18 20:25:34 [DEBUG] MongoDB command output: {"_id":"example-mongodb","version":1,"term":1,"members":[{"_id":0,"host":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":1,"tags":{},"secondaryDelaySecs":{"low":0,"high":0,"unsigned":false},"votes":1},{"_id":1,"host":"example-mongodb-1.example-mongodb-svc.mongodb.svc.cluster.local:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":1,"tags":{},"secondaryDelaySecs":{"low":0,"high":0,"unsigned":false},"votes":1}],"protocolVersion":{"low":1,"high":0,"unsigned":false},"writeConcernMajorityJournalDefault":true,"settings":{"chainingAllowed":true,"heartbeatIntervalMillis":2000,"heartbeatTimeoutSecs":10,"electionTimeoutMillis":10000,"catchUpTimeoutMillis":-1,"catchUpTakeoverDelayMillis":30000,"getLastErrorModes":{},"getLastErrorDefaults":{"w":1,"wtimeout":0},"replicaSetId":"68a36e611165d0b87348446e"}}

2025-08-18 20:25:34 [INFO] mongodb://clusteradmin:password1@example-mongodb-0.origin.example-mongodb-svc.mongodb.svc.clusterset.local:27017,example-mongodb-1.origin.example-mongodb-svc.mongodb.svc.clusterset.local:27017/?authSource=admin
2025-08-18 20:25:36 [DEBUG] MongoDB command output: {"_id":"example-mongodb","version":1,"term":1,"members":[{"_id":0,"host":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":1,"tags":{},"secondaryDelaySecs":{"low":0,"high":0,"unsigned":false},"votes":1}],"protocolVersion":{"low":1,"high":0,"unsigned":false},"writeConcernMajorityJournalDefault":true,"settings":{"chainingAllowed":true,"heartbeatIntervalMillis":2000,"heartbeatTimeoutSecs":10,"electionTimeoutMillis":10000,"catchUpTimeoutMillis":-1,"catchUpTakeoverDelayMillis":30000,"getLastErrorModes":{},"getLastErrorDefaults":{"w":1,"wtimeout":0},"replicaSetId":"68a370053687d80bb7da53e7"}}

2025-08-18 20:25:36 [INFO] mongodb://clusteradmin:password1@example-mongodb-0.target.example-mongodb-svc.mongodb.svc.clusterset.local:27017/?authSource=admin
2025-08-18 20:25:42 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:25:47 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:25:52 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:25:57 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:26:02 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:26:07 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:26:12 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:26:17 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:26:22 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:26:27 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-18 20:26:32 [DEBUG] Job mongosyncer-job in namespace default has completed
2025-08-18 20:26:35 [DEBUG] MongoDB command output: {
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1755541595, i: 1 }),
    signature: {
      hash: Binary.createFromBase64('0etGpO77DVchOlDyFztYHNKsGcM=', 0),
      keyId: Long('7539993367925489671')
    }
  },
  operationTime: Timestamp({ t: 1755541595, i: 1 })
}

2025-08-18 20:26:35 [DEBUG] Deleting MongoDB client pod...
2025-08-18 20:26:35 [DEBUG] Deleting MongoDB client pod...
2025-08-18 20:26:35 [DEBUG] Restoring MongoDB cluster example-mongodb member count to 2
2025-08-18 20:26:35 [INFO] Migrating PostgreSQL databases
2025-08-18 20:26:35 [INFO] No existing PostgreSQL databases found, skipping migration
2025-08-18 20:26:35 [INFO] Migrating resources
2025-08-18 20:26:36 [INFO] Enable request forwarding from origin
2025-08-18 20:26:36 [INFO] Migration complete

2025-08-19 12:29:03 [INFO] Starting migration process...
2025-08-19 12:29:03 [INFO] You will be prompted to select a networking tool and rerouting option to establish a secure connection and manage traffic between the clusters.
2025-08-19 12:30:57 [INFO] Initializing kubernetes clients
2025-08-19 12:30:57 [INFO] Checking connectivity between clusters
2025-08-19 12:30:57 [DEBUG] Fetching cluster IPs
2025-08-19 12:30:57 [DEBUG] Cleaning up probe resources
2025-08-19 12:30:57 [DEBUG] Testing connectivity with Origin IP: 192.168.131.1, Target IP: 192.168.133.1
2025-08-19 12:30:57 [DEBUG] Deploying probe resources
2025-08-19 12:30:59 [DEBUG] Waiting for pods to be ready
2025-08-19 12:31:04 [DEBUG] Pods are ready
2025-08-19 12:31:04 [DEBUG] Checking connectivity between clusters
2025-08-19 12:31:14 [DEBUG] Connectivity check successful with Origin IP: 192.168.131.1, Target IP: 192.168.133.1 - both clusters can reach each other
2025-08-19 12:31:14 [DEBUG] Cleaning up probe resources
2025-08-19 12:31:14 [DEBUG] Connectivity probe complete
2025-08-19 12:31:14 [INFO] Establishing secure connection between clusters
2025-08-19 12:31:14 [INFO] Installing Skupper
2025-08-19 12:31:14 [INFO] Deploying Site Controller
2025-08-19 12:31:21 [INFO] Deploying Site Controller
2025-08-19 12:31:28 [INFO] Migrating configuration resources
2025-08-19 12:31:30 [INFO] Entering Skupper rerouting section
2025-08-19 12:31:30 [INFO] Including namespace for Skupper: benchmark
2025-08-19 12:31:30 [INFO] Including namespace for Skupper: mongodb
2025-08-19 12:31:30 [INFO] Number of target namespaces found: 2
2025-08-19 12:31:30 [INFO] Creating Skupper site connection for namespace: benchmark
2025-08-19 12:31:30 [INFO] Creating Site Connection on Namespace: benchmark
2025-08-19 12:31:30 [INFO] Creating Site
2025-08-19 12:31:56 [INFO] Creating Site
2025-08-19 12:32:22 [INFO] Creating Connection Token
2025-08-19 12:32:22 [INFO] Waiting for token to be populated with data
2025-08-19 12:32:28 [INFO] Token successfully populated with data
2025-08-19 12:32:28 [INFO] Extracting Connection Token
2025-08-19 12:32:28 [INFO] Creating Connection Token
2025-08-19 12:32:28 [INFO] Waiting for token to be populated with data
2025-08-19 12:32:33 [INFO] Token successfully populated with data
2025-08-19 12:32:33 [INFO] Extracting Connection Token
2025-08-19 12:32:33 [INFO] Creating Skupper site connection for namespace: mongodb
2025-08-19 12:32:33 [INFO] Creating Site Connection on Namespace: mongodb
2025-08-19 12:32:33 [INFO] Creating Site
2025-08-19 12:32:53 [INFO] Creating Site
2025-08-19 12:33:13 [INFO] Creating Connection Token
2025-08-19 12:33:13 [INFO] Waiting for token to be populated with data
2025-08-19 12:33:19 [INFO] Token successfully populated with data
2025-08-19 12:33:19 [INFO] Extracting Connection Token
2025-08-19 12:33:19 [INFO] Creating Connection Token
2025-08-19 12:33:19 [INFO] Waiting for token to be populated with data
2025-08-19 12:33:24 [INFO] Token successfully populated with data
2025-08-19 12:33:24 [INFO] Extracting Connection Token
2025-08-19 12:33:24 [INFO] Finished processing all namespaces
2025-08-19 12:33:24 [INFO] Scanning for existing cnpg databases
2025-08-19 12:33:24 [INFO] No existing cnpg databases found, skipping migration
2025-08-19 12:33:24 [INFO] Migrating MongoDBs
2025-08-19 12:33:24 [INFO] No existing MongoDBs found, skipping migration
2025-08-19 12:33:24 [INFO] Checking for existing MongoDB Community Operator deployment
2025-08-19 12:33:24 [DEBUG] Found MongoDB Community Operator version 0.13.0 in namespace mongodb
2025-08-19 12:33:24 [INFO] Deploying MongoDB Community Operator version 0.13.0 to target cluster
2025-08-19 12:33:35 [DEBUG] Found 1 MongoDB databases in origin cluster
2025-08-19 12:33:35 [DEBUG] Creating MongoDB client pod...
2025-08-19 12:33:35 [DEBUG] Waiting for MongoDB client pod to be ready...
2025-08-19 12:33:52 [DEBUG] Creating MongoDB client pod...
2025-08-19 12:33:52 [DEBUG] Waiting for MongoDB client pod to be ready...
2025-08-19 12:34:10 [DEBUG] Deploying MongoDB cluster example-mongodb in namespace mongodb
2025-08-19 12:34:10 [DEBUG] Waiting for MongoDB cluster example-mongodb in namespace mongodb to be ready
2025-08-19 12:34:15 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: 
2025-08-19 12:34:20 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:34:25 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:34:30 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:34:35 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:34:41 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:34:46 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:34:51 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:34:56 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:35:01 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:35:06 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is not ready yet, current phase: Pending
2025-08-19 12:35:06 [DEBUG] MongoDB cluster example-mongodb in namespace mongodb is ready
2025-08-19 12:35:11 [INFO] Export service
2025-08-19 12:35:19 [DEBUG] MongoDB command output: {"set":"example-mongodb","date":"2025-08-19T10:35:18.983Z","myState":2,"term":{"low":1,"high":0,"unsigned":false},"syncSourceHost":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","syncSourceId":0,"heartbeatIntervalMillis":{"low":2000,"high":0,"unsigned":false},"majorityVoteCount":2,"writeMajorityCount":2,"votingMembersCount":2,"writableVotingMembersCount":2,"optimes":{"lastCommittedOpTime":{"ts":{"$timestamp":"7540243373676822535"},"t":{"low":1,"high":0,"unsigned":false}},"lastCommittedWallTime":"2025-08-19T10:35:18.807Z","readConcernMajorityOpTime":{"ts":{"$timestamp":"7540243373676822535"},"t":{"low":1,"high":0,"unsigned":false}},"appliedOpTime":{"ts":{"$timestamp":"7540243373676822535"},"t":{"low":1,"high":0,"unsigned":false}},"durableOpTime":{"ts":{"$timestamp":"7540243373676822535"},"t":{"low":1,"high":0,"unsigned":false}},"lastAppliedWallTime":"2025-08-19T10:35:18.807Z","lastDurableWallTime":"2025-08-19T10:35:18.807Z"},"lastStableRecoveryTimestamp":{"$timestamp":"7540243309252313093"},"electionParticipantMetrics":{"votedForCandidate":true,"electionTerm":{"low":1,"high":0,"unsigned":false},"lastVoteDate":"2025-08-19T10:27:02.282Z","electionCandidateMemberId":0,"voteReason":"","lastAppliedOpTimeAtElection":{"ts":{"$timestamp":"7540241191833436161"},"t":{"low":-1,"high":-1,"unsigned":false}},"maxAppliedOpTimeInSet":{"ts":{"$timestamp":"7540241191833436161"},"t":{"low":-1,"high":-1,"unsigned":false}},"priorityAtElection":1,"newTermStartDate":"2025-08-19T10:27:02.324Z","newTermAppliedDate":"2025-08-19T10:27:03.207Z"},"members":[{"_id":0,"name":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","health":1,"state":1,"stateStr":"PRIMARY","uptime":507,"optime":{"ts":{"$timestamp":"7540243369381855236"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDurable":{"ts":{"$timestamp":"7540243369381855236"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDate":"2025-08-19T10:35:17.000Z","optimeDurableDate":"2025-08-19T10:35:17.000Z","lastAppliedWallTime":"2025-08-19T10:35:17.402Z","lastDurableWallTime":"2025-08-19T10:35:17.402Z","lastHeartbeat":"2025-08-19T10:35:17.471Z","lastHeartbeatRecv":"2025-08-19T10:35:18.481Z","pingMs":{"low":0,"high":0,"unsigned":false},"lastHeartbeatMessage":"","syncSourceHost":"","syncSourceId":-1,"infoMessage":"","electionTime":{"$timestamp":"7540241243373043713"},"electionDate":"2025-08-19T10:27:02.000Z","configVersion":1,"configTerm":1},{"_id":1,"name":"example-mongodb-1.example-mongodb-svc.mongodb.svc.cluster.local:27017","health":1,"state":2,"stateStr":"SECONDARY","uptime":510,"optime":{"ts":{"$timestamp":"7540243373676822535"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDate":"2025-08-19T10:35:18.000Z","lastAppliedWallTime":"2025-08-19T10:35:18.807Z","lastDurableWallTime":"2025-08-19T10:35:18.807Z","syncSourceHost":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","syncSourceId":0,"infoMessage":"","configVersion":1,"configTerm":1,"self":true,"lastHeartbeatMessage":""}],"ok":1,"$clusterTime":{"clusterTime":{"$timestamp":"7540243373676822535"},"signature":{"hash":"KOouAh3URXf5zSi44FmfAM82fAU=","keyId":{"low":5,"high":1755599222,"unsigned":false}}},"operationTime":{"$timestamp":"7540243373676822535"}}

2025-08-19 12:35:22 [DEBUG] MongoDB command output: {"set":"example-mongodb","date":"2025-08-19T10:35:22.040Z","myState":1,"term":{"low":1,"high":0,"unsigned":false},"syncSourceHost":"","syncSourceId":-1,"heartbeatIntervalMillis":{"low":2000,"high":0,"unsigned":false},"majorityVoteCount":1,"writeMajorityCount":1,"votingMembersCount":1,"writableVotingMembersCount":1,"optimes":{"lastCommittedOpTime":{"ts":{"$timestamp":"7540243365086887937"},"t":{"low":1,"high":0,"unsigned":false}},"lastCommittedWallTime":"2025-08-19T10:35:16.010Z","readConcernMajorityOpTime":{"ts":{"$timestamp":"7540243365086887937"},"t":{"low":1,"high":0,"unsigned":false}},"appliedOpTime":{"ts":{"$timestamp":"7540243365086887937"},"t":{"low":1,"high":0,"unsigned":false}},"durableOpTime":{"ts":{"$timestamp":"7540243365086887937"},"t":{"low":1,"high":0,"unsigned":false}},"lastAppliedWallTime":"2025-08-19T10:35:16.010Z","lastDurableWallTime":"2025-08-19T10:35:16.010Z"},"lastStableRecoveryTimestamp":{"$timestamp":"7540243274892574721"},"electionCandidateMetrics":{"lastElectionReason":"electionTimeout","lastElectionDate":"2025-08-19T10:34:55.935Z","electionTerm":{"low":1,"high":0,"unsigned":false},"lastCommittedOpTimeAtElection":{"ts":{"$timestamp":"7540243274892574721"},"t":{"low":-1,"high":-1,"unsigned":false}},"lastSeenOpTimeAtElection":{"ts":{"$timestamp":"7540243274892574721"},"t":{"low":-1,"high":-1,"unsigned":false}},"numVotesNeeded":1,"priorityAtElection":1,"electionTimeoutMillis":{"low":10000,"high":0,"unsigned":false},"newTermStartDate":"2025-08-19T10:34:55.988Z","wMajorityWriteAvailabilityDate":"2025-08-19T10:34:56.012Z"},"members":[{"_id":0,"name":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","health":1,"state":1,"stateStr":"PRIMARY","uptime":28,"optime":{"ts":{"$timestamp":"7540243365086887937"},"t":{"low":1,"high":0,"unsigned":false}},"optimeDate":"2025-08-19T10:35:16.000Z","lastAppliedWallTime":"2025-08-19T10:35:16.010Z","lastDurableWallTime":"2025-08-19T10:35:16.010Z","syncSourceHost":"","syncSourceId":-1,"infoMessage":"Could not find member to sync from","electionTime":{"$timestamp":"7540243274892574722"},"electionDate":"2025-08-19T10:34:55.000Z","configVersion":1,"configTerm":1,"self":true,"lastHeartbeatMessage":""}],"ok":1,"$clusterTime":{"clusterTime":{"$timestamp":"7540243365086887937"},"signature":{"hash":"zSIhNYkGpAUJsSM+BFnFOKclPfM=","keyId":{"low":6,"high":1755599695,"unsigned":false}}},"operationTime":{"$timestamp":"7540243365086887937"}}

2025-08-19 12:35:22 [INFO] Primary MongoDB host in origin cluster: example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local
2025-08-19 12:35:22 [INFO] Primary MongoDB host in target cluster: example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local
2025-08-19 12:35:24 [DEBUG] MongoDB command output: {
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1755599724, i: 5 }),
    signature: {
      hash: Binary.createFromBase64('a2G77mNMGRdEaJm8kki2ND8escY=', 0),
      keyId: Long('7540241243373043717')
    }
  },
  operationTime: Timestamp({ t: 1755599724, i: 5 })
}

2025-08-19 12:35:27 [DEBUG] MongoDB command output: {
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1755599727, i: 1 }),
    signature: {
      hash: Binary.createFromBase64('kKEQ4SCimNMbuG4xtwZWdqkTRhM=', 0),
      keyId: Long('7540243274892574726')
    }
  },
  operationTime: Timestamp({ t: 1755599727, i: 1 })
}

2025-08-19 12:35:29 [DEBUG] MongoDB command output: {"_id":"example-mongodb","version":1,"term":1,"members":[{"_id":0,"host":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":1,"tags":{},"secondaryDelaySecs":{"low":0,"high":0,"unsigned":false},"votes":1},{"_id":1,"host":"example-mongodb-1.example-mongodb-svc.mongodb.svc.cluster.local:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":1,"tags":{},"secondaryDelaySecs":{"low":0,"high":0,"unsigned":false},"votes":1}],"protocolVersion":{"low":1,"high":0,"unsigned":false},"writeConcernMajorityJournalDefault":true,"settings":{"chainingAllowed":true,"heartbeatIntervalMillis":2000,"heartbeatTimeoutSecs":10,"electionTimeoutMillis":10000,"catchUpTimeoutMillis":-1,"catchUpTakeoverDelayMillis":30000,"getLastErrorModes":{},"getLastErrorDefaults":{"w":1,"wtimeout":0},"replicaSetId":"68a4516a30525d54818fe4d9"}}

2025-08-19 12:35:29 [INFO] mongodb://clusteradmin:password1@example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017,example-mongodb-1.example-mongodb-svc.mongodb.svc.cluster.local:27017/?authSource=admin
2025-08-19 12:35:32 [DEBUG] MongoDB command output: {"_id":"example-mongodb","version":1,"term":1,"members":[{"_id":0,"host":"example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017","arbiterOnly":false,"buildIndexes":true,"hidden":false,"priority":1,"tags":{},"secondaryDelaySecs":{"low":0,"high":0,"unsigned":false},"votes":1}],"protocolVersion":{"low":1,"high":0,"unsigned":false},"writeConcernMajorityJournalDefault":true,"settings":{"chainingAllowed":true,"heartbeatIntervalMillis":2000,"heartbeatTimeoutSecs":10,"electionTimeoutMillis":10000,"catchUpTimeoutMillis":-1,"catchUpTakeoverDelayMillis":30000,"getLastErrorModes":{},"getLastErrorDefaults":{"w":1,"wtimeout":0},"replicaSetId":"68a4534f6f15c8665d4e5d3a"}}

2025-08-19 12:35:32 [INFO] mongodb://clusteradmin:password1@example-mongodb-0.example-mongodb-svc.mongodb.svc.cluster.local:27017/?authSource=admin
2025-08-19 12:35:37 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:35:42 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:35:47 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:35:52 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:35:57 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:36:02 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:36:07 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:36:12 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:36:17 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:36:22 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:36:27 [DEBUG] Job mongosyncer-job in namespace default not completed yet, waiting...
2025-08-19 12:36:32 [DEBUG] Job mongosyncer-job in namespace default has completed
2025-08-19 12:36:35 [DEBUG] MongoDB command output: {
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1755599795, i: 1 }),
    signature: {
      hash: Binary.createFromBase64('DrVrFzluJa3gYyjiZ58fOp3qHpw=', 0),
      keyId: Long('7540243274892574726')
    }
  },
  operationTime: Timestamp({ t: 1755599795, i: 1 })
}

2025-08-19 12:36:35 [DEBUG] Deleting MongoDB client pod...
2025-08-19 12:36:35 [DEBUG] Deleting MongoDB client pod...
2025-08-19 12:36:35 [DEBUG] Restoring MongoDB cluster example-mongodb member count to 2
2025-08-19 12:36:35 [INFO] Migrating PostgreSQL databases
2025-08-19 12:36:35 [INFO] No existing PostgreSQL databases found, skipping migration
2025-08-19 12:36:35 [INFO] Migrating resources
2025-08-19 12:36:36 [INFO] Enable request forwarding from origin
2025-08-19 12:36:36 [INFO] Export service
2025-08-19 12:36:37 [INFO] Export service
2025-08-19 12:36:37 [INFO] Export service
2025-08-19 12:36:37 [INFO] Export service
2025-08-19 12:36:37 [INFO] Export service
2025-08-19 12:36:38 [INFO] Export service
2025-08-19 12:36:38 [INFO] Export service
2025-08-19 12:36:39 [INFO] Export service
2025-08-19 12:36:39 [INFO] Export service
2025-08-19 12:36:40 [INFO] Export service
2025-08-19 12:36:41 [INFO] Export service
2025-08-19 12:36:41 [INFO] Export service
2025-08-19 12:36:42 [INFO] Migration complete
